<idea-plugin version="2">

    <name>SBT support</name>
    <id>org.jetbrains.sbt</id>
    <description>Simple Build Tool support</description>
    <version>SNAPSHOT</version>
    <vendor logo="/general/ijLogo.png">JetBrains</vendor>

    <depends>org.intellij.scala</depends>

    <idea-version since-build="129.17" until-build="1000.9999"/>

    <application-components>
    </application-components>

    <project-components>
        <component>
            <implementation-class>org.jetbrains.sbt.language.SbtProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <errorHandler implementation="com.intellij.diagnostic.ITNReporter"/>

        <fileTypeFactory implementation="org.jetbrains.sbt.language.SbtFileTypeFactory"/>
        <annotator language="Scala" implementationClass="org.jetbrains.sbt.language.SbtAnnotator" />

        <externalSystemManager implementation="org.jetbrains.sbt.project.SbtExternalSystemManager"/>
        <externalProjectDataService implementation="org.jetbrains.sbt.project.SbtFacetDataService"/>
        <externalProjectDataService implementation="org.jetbrains.sbt.project.SbtProjectDataService"/>

        <projectService serviceImplementation="org.jetbrains.sbt.project.settings.SbtSettings"/>
        <projectService serviceImplementation="org.jetbrains.sbt.project.settings.SbtLocalSettings"/>

        <projectImportProvider implementation="org.jetbrains.sbt.project.SbtProjectImportProvider"/>
        <projectImportBuilder implementation="org.jetbrains.sbt.project.SbtProjectImportBuilder"/>

        <projectOpenProcessor implementation="org.jetbrains.sbt.project.SbtProjectOpenProcessor"/>

        <moduleType id="SBT_MODULE" implementationClass="org.jetbrains.sbt.project.SbtModuleType"/>
    </extensions>

    <extensions defaultExtensionNs="org.intellij.scala">
        <scalaFileFactory implementation="org.jetbrains.sbt.language.SbtFileFactory" />
    </extensions>

    <!-- External project system entries -->
    <actions>
        <!--Tool window actions-->
        <action id="ExternalSystem.RefreshAllProjects"
                class="com.intellij.openapi.externalSystem.action.RefreshAllExternalProjectsAction"
                icon="AllIcons.Actions.Refresh"/>

        <group id="ExternalSystem.ToolWindow.Toolbar">
            <reference id="ExternalSystem.RefreshAllProjects"/>
        </group>

        <!--Context menu action-->
        <action id="ExternalSystem.RunTask"
                class="com.intellij.openapi.externalSystem.action.RunExternalTaskAction"
                icon="AllIcons.Toolwindows.ToolWindowRun"/>
        <group id="ExternalSystem.Tree.Context" popup="true">
            <reference ref="RunContextGroup"/>
        </group>
    </actions>

    <extensionPoints>
        <extensionPoint qualifiedName="com.intellij.externalSystemManager" interface="com.intellij.openapi.externalSystem.ExternalSystemManager"/>
        <extensionPoint qualifiedName="com.intellij.externalProjectDataService" interface="com.intellij.openapi.externalSystem.service.project.manage.ProjectDataService"/>
    </extensionPoints>

    <!-- External project system entries -->
    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="com.intellij.openapi.externalSystem.service.ExternalSystemStartupActivity"/>

        <!--Generic services-->
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.service.ExternalSystemFacadeManager"/>
        <applicationService
                serviceInterface="com.intellij.openapi.externalSystem.service.notification.ExternalSystemProgressNotificationManager"
                serviceImplementation="com.intellij.openapi.externalSystem.service.remote.ExternalSystemProgressNotificationManagerImpl"/>
        <applicationService serviceInterface="com.intellij.openapi.externalSystem.service.project.PlatformFacade"
                            serviceImplementation="com.intellij.openapi.externalSystem.service.project.PlatformFacadeImpl"/>
        <applicationService serviceInterface="com.intellij.openapi.externalSystem.service.project.ExternalLibraryPathTypeMapper"
                            serviceImplementation="com.intellij.openapi.externalSystem.service.project.ExternalLibraryPathTypeMapperImpl"/>
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.settings.ExternalSystemSettingsManager"/>
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.service.project.ProjectStructureHelper"/>
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.service.internal.ExternalSystemProcessingManager"/>
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.service.notification.ExternalSystemIdeNotificationManager"/>

        <!--Project structure management services-->
        <applicationService serviceImplementation="com.intellij.openapi.externalSystem.service.project.manage.ProjectDataManager"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.ProjectDataServiceImpl"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.LibraryDataService"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.ModuleDataService"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.ContentRootDataService"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.LibraryDependencyDataService"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.project.manage.ModuleDependencyDataService"/>

        <!--Tool window services-->
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.task.ToolWindowModuleService"/>
        <externalProjectDataService implementation="com.intellij.openapi.externalSystem.service.task.ToolWindowTaskService"/>

        <!--Execution-->
        <programRunner implementation="com.intellij.openapi.externalSystem.service.execution.ExternalSystemTaskRunner"/>
        <programRunner implementation="com.intellij.openapi.externalSystem.service.execution.ExternalSystemTaskDebugRunner"/>
    </extensions>

</idea-plugin>
