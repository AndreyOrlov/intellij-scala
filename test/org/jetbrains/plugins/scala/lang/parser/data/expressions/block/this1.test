class A{
  def takeWhile(p: a => Boolean): List[a] = {
    val b = new ListBuffer[a]
    var these = this
    while (!these.isEmpty && p(these.head)) {
      b += these.head
      these = these.tail
    }
    b.toList
  }
}
-----
Scala file
  template definition: class
    PsiElement(class)('class')
    PsiWhiteSpace(' ')
    Identifier
      PsiElement(identifier)('A')
    class template
      template body
        PsiElement({)('{')
        PsiWhiteSpace('\n')
        PsiWhiteSpace(' ')
        PsiWhiteSpace(' ')
        function definition
          PsiElement(def)('def')
          PsiWhiteSpace(' ')
          Identifier
            PsiElement(identifier)('takeWhile')
          parameters clause
            PsiElement(()('(')
            parameter
              Identifier
                PsiElement(identifier)('p')
              PsiElement(:)(':')
              PsiWhiteSpace(' ')
              Function type
                Function type
                  Simple type
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('a')
                  PsiWhiteSpace(' ')
                  PsiElement(=>)('=>')
                  PsiWhiteSpace(' ')
                  Simple type
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('Boolean')
            PsiElement())(')')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          Simple type
            Simple Type
              Stable Identifier
                Identifier
                  PsiElement(identifier)('List')
            Type arguments list
              PsiElement([)('[')
              Simple type
                Stable Identifier
                  Identifier
                    PsiElement(identifier)('a')
              PsiElement(])(']')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace(' ')
          Block expressions
            PsiElement({)('{')
            PsiWhiteSpace('\n')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            pattern definition
              PsiElement(val)('val')
              PsiWhiteSpace(' ')
              Identifier
                PsiElement(identifier)('b')
              PsiWhiteSpace(' ')
              PsiElement(=)('=')
              PsiWhiteSpace(' ')
              PsiElement(new)('new')
              PsiWhiteSpace(' ')
              template parents
                constuctor
                  Stable Identifier
                    Identifier
                      PsiElement(identifier)('ListBuffer')
                  Type arguments list
                    PsiElement([)('[')
                    Types list
                      Simple type
                        Stable Identifier
                          Identifier
                            PsiElement(identifier)('a')
                    PsiElement(])(']')
            PsiElement(newline)('\n')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            variable definition
              PsiElement(var)('var')
              PsiWhiteSpace(' ')
              Identifier
                PsiElement(identifier)('these')
              PsiWhiteSpace(' ')
              PsiElement(=)('=')
              PsiWhiteSpace(' ')
              Path
                PsiElement(this)('this')
            PsiElement(newline)('\n')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            WHILE statement
              PsiElement(while)('while')
              PsiWhiteSpace(' ')
              PsiElement(()('(')
              Infix expression
                Prefix expression
                  PsiElement(identifier)('!')
                  Stable Identifier
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('these')
                    PsiElement(.)('.')
                    Identifier
                      PsiElement(identifier)('isEmpty')
                PsiWhiteSpace(' ')
                Identifier
                  PsiElement(identifier)('&&')
                PsiWhiteSpace(' ')
                Stable Identifier
                  Identifier
                    PsiElement(identifier)('p')
                Argument expressions
                  PsiElement(()('(')
                  Stable Identifier
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('these')
                    PsiElement(.)('.')
                    Identifier
                      PsiElement(identifier)('head')
                  PsiElement())(')')
              PsiElement())(')')
              PsiWhiteSpace(' ')
              Block expressions
                PsiElement({)('{')
                PsiWhiteSpace('\n')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                Infix expression
                  Stable Identifier
                    Identifier
                      PsiElement(identifier)('b')
                  PsiWhiteSpace(' ')
                  Identifier
                    PsiElement(identifier)('+=')
                  PsiWhiteSpace(' ')
                  Stable Identifier
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('these')
                    PsiElement(.)('.')
                    Identifier
                      PsiElement(identifier)('head')
                PsiElement(newline)('\n')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                Assign statement
                  Identifier
                    PsiElement(identifier)('these')
                  PsiWhiteSpace(' ')
                  PsiElement(=)('=')
                  PsiWhiteSpace(' ')
                  Stable Identifier
                    Stable Identifier
                      Identifier
                        PsiElement(identifier)('these')
                    PsiElement(.)('.')
                    Identifier
                      PsiElement(identifier)('tail')
                PsiWhiteSpace('\n')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiWhiteSpace(' ')
                PsiElement(})('}')
            PsiElement(newline)('\n')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            Stable Identifier
              Stable Identifier
                Identifier
                  PsiElement(identifier)('b')
              PsiElement(.)('.')
              Identifier
                PsiElement(identifier)('toList')
            PsiWhiteSpace('\n')
            PsiWhiteSpace(' ')
            PsiWhiteSpace(' ')
            PsiElement(})('}')
        PsiWhiteSpace('\n')
        PsiElement(})('}')